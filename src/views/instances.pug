extend layout

block css
    link(rel="stylesheet", href="../css/instances.css")

block js
    script.
        $(() => {
            // render list
            Render.instanceList();
            // apply event handlers
            $(document).on("click", ".version-option", (event) => {
                let jqThis = $(event.currentTarget);
                const thisId = jqThis.attr("data-instance-id");
                let instance = store.versionsMetaCache.get().versions.find(obj => obj.id == thisId);
                // add new instance
                instances.newInstance(instance);
                console.log($(this).attr("data-instance-id"))
                // hide modal
                $("#instance-modal").modal("hide");
                // update list
                Render.instanceList();
            });
        });
    script(src="../templates/instanceList.js")

block content
    h1 Instances
    .ui.button(onclick="instances.newInstanceModal()") New Instance
    .ui.warning.message #[strong Disclaimer:] Buttons are currently only placeholders. They do not actually work (yet).
    .ui.raised.segment
        .ui.divided.items#instance-list
        //- render list


block modals
    .ui.modal#instance-modal
        .header New Instance
        .scrolling.content
            h3 Vanilla instances
            .ui.negative.message #[strong Important:] Install functionality has not been implemented yet. Please check back later.
            .ui.divided.relaxed.list#versions-list

block templates
    script#template-versionModal(type="text/x-jsrender")
        a.item.version-option(data-instance-id="{{:id}}"
        data-instance-clienttype="{{if clientType}}{{:clientType}}{{else}}Vanilla{{/if}}"
        data-instance-type="{{:type}}")
            .content 
                .header {{:id}}
                .meta.
                    {{if clientType}}
                        {{:clientType}} - {{:type}}
                    {{else}}
                        Vanilla - {{:type}}
                    {{/if}}